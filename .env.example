# DatabaseAdvancedTokenizer - Environment Configuration

# Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/embeddings # Example for direct URL
DB_HOST=localhost
DB_PORT=5432
DB_NAME=framestore
DB_USER=postgres
DB_PASSWORD=password
# Supabase specific (if using Supabase client instead of generic postgres)
# SUPABASE_URL=your_supabase_url
# SUPABASE_KEY=your_supabase_service_role_key

# API Configuration
HOST=0.0.0.0
PORT=8000
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Voyage AI Configuration (Embedding Model)
VOYAGE_API_KEY=your_voyage_api_key
EMBEDDING_MODEL_NAME=voyage-multimodal-3 # Official multimodal model
EMBEDDING_DIM=1024 # Dimension for voyage-multimodal-3

# LLM Configuration (for Metadata Structuring & Description)
GOOGLE_API_KEY=your_google_api_key # Use API Key from Google AI Studio
LLM_MODEL_NAME=gemini-1.5-pro-latest # Or gemini-1.5-flash-latest

# Google Drive Configuration
GOOGLE_APPLICATION_CREDENTIALS=credentials/credentials.json # Path to Service Account key file
# GOOGLE_DRIVE_CLIENT_ID=your_google_drive_client_id # Not needed for Service Account auth
# GOOGLE_DRIVE_CLIENT_SECRET=your_google_drive_client_secret # Not needed for Service Account auth
# GOOGLE_DRIVE_REFRESH_TOKEN=your_google_drive_refresh_token # Not needed for Service Account auth

# Airtable Configuration
AIRTABLE_PERSONAL_ACCESS_TOKEN=your_airtable_token_here
AIRTABLE_BASE_ID=your_airtable_base_id_here
AIRTABLE_TABLE_NAME=tblFrameAnalysis

# Airtable Field Mappings (Ensure these match your Airtable base)
DRIVE_FILE_ID_FIELD='Frame ID'
FRAME_FILENAME_FIELD=FrameFilename # Field containing the filename relative to FRAME_BASE_DIR
FRAME_NUMBER_FIELD=FrameNumber
VIDEO_ID_FIELD=VideoID
TIMESTAMP_FIELD=Timestamp
TITLE_FIELD=FolderName
PROCESSED_FIELD=Processed
# Add other relevant fields from your Airtable base that need processing
# Example based on image:
# FOLDER_PATH_FIELD=FolderPath 
# SUMMARY_FIELD=Summary
# TOOLS_VISIBLE_FIELD=ToolsVisible 
# ACTIONS_DETECTED_FIELD=ActionsDetected
# TECHNICAL_DETAILS_FIELD=TechnicalDetails
# RELATIONSHIP_TO_PREVIOUS_FIELD=RelationshipToPrevious
# STAGE_OF_WORK_FIELD=StageOfWork

# Processing Configuration
FRAME_BASE_DIR=/path/to/frames
BATCH_SIZE=10 # Frames fetched from Airtable at once
MAX_WORKERS=4 # Concurrent workers for processing
SIMILARITY_THRESHOLD=0.75
TEMP_DIR=/tmp/database_tokenizer
CHUNK_SIZE=500
CHUNK_OVERLAP=50
MAX_CHUNKS=10

# API Security (Optional)
JWT_SECRET=your_very_long_and_secure_random_string
JWT_EXPIRE_MINUTES=60
API_KEY=your_api_key_for_automated_access

# Webhook Configuration (Optional)
WEBHOOK_URL=https://example.com/webhook/endpoint
WEBHOOK_SECRET=your_webhook_secret

# Frame Processing Configuration
DEFAULT_CHUNK_SIZE=500
DEFAULT_CHUNK_OVERLAP=50
MAX_CHUNKS_PER_FRAME=5

# VoyageAI Configuration
VOYAGE_API_KEY_1=voyage_api_key_1_here
VOYAGE_API_KEY_2=voyage_api_key_2_here
VOYAGE_API_KEY_3=voyage_api_key_3_here
VOYAGE_RATE_LIMIT=10
VOYAGE_COOLDOWN_PERIOD=60

# Testing
TEST_FRAME_RELATIVE_PATH=relative/path/to/test/frame.jpg

# --- Test Configuration --- 
TEST_FRAME_RELATIVE_PATH=YourFolder/your_test_frame_001.png # Replace with a valid relative path from your Airtable/frame setup 

# API Keys
OPENAI_API_KEY=your_openai_api_key

# Storage Paths
LOCAL_STORAGE_DIR=frame_embeddings

# Rate Limiting
MIN_API_INTERVAL=0.2  # Minimum time between API calls in seconds
USE_KEY_ROTATION=true  # Use key rotation to manage API rate limits 